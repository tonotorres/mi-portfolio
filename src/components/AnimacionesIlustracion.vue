<template>
<div class="rotate">
			<main data-scroll-container>
				<div class="content">
					<div class="gallery">
						<figure class="gallery__item">
							<div class="gallery__item-img">
                                <img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
                            </div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Moonraker</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">01</span>
								<p class="gallery__item-tags">
									<span>#house</span>
									<span>#green</span>
									<span>#chair</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img">
                                <img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Nacarat</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">02</span>
								<p class="gallery__item-tags">
									<span>#love</span>
									<span>#hug</span>
									<span>#people</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Selkie</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">03</span>
								<p class="gallery__item-tags">
									<span>#hike</span>
									<span>#nature</span>
									<span>#rain</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Thalassic</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">04</span>
								<p class="gallery__item-tags">
									<span>#free</span>
									<span>#wood</span>
									<span>#fire</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<div class="gallery__text"><span class="gallery__text-inner" data-scroll data-scroll-speed="1">Verjuice</span><span data-scroll data-scroll-speed="3" class="gallery__text-inner">Zyrian</span></div>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Uroboros</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">05</span>
								<p class="gallery__item-tags">
									<span>#cloud</span>
									<span>#lake</span>
									<span>#frog</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Waitron</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">06</span>
								<p class="gallery__item-tags">
									<span>#tent</span>
									<span>#flower</span>
									<span>#love</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Soucouyant</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">07</span>
								<p class="gallery__item-tags">
									<span>#water</span>
									<span>#bottle</span>
									<span>#hand</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Periapt</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">08</span>
								<p class="gallery__item-tags">
									<span>#night</span>
									<span>#stars</span>
									<span>#moon</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<div class="gallery__text"><span class="gallery__text-inner" data-scroll data-scroll-speed="1">Tiffin</span><span data-scroll data-scroll-speed="2" class="gallery__text-inner">Skanky</span></div>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Cyanic</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">09</span>
								<p class="gallery__item-tags">
									<span>#sun</span>
									<span>#light</span>
									<span>#air</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Martlet</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">10</span>
								<p class="gallery__item-tags">
									<span>#vital</span>
									<span>#fog</span>
									<span>#close</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Eurhythmic</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">11</span>
								<p class="gallery__item-tags">
									<span>#cover</span>
									<span>#bed</span>
									<span>#window</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<figure class="gallery__item">
							<div class="gallery__item-img"><img class="gallery__item-imginner"  src="../assets/images/ilustracion/photoshop-1.jpg" alt="" loading="lazy" data-scroll data-scroll-speed="-0.8">
</div>
							<figcaption class="gallery__item-caption">
								<h2 class="gallery__item-title" data-scroll data-scroll-speed="1">Dariole</h2>
								<span class="gallery__item-number" data-scroll data-scroll-speed="1.5">12</span>
								<p class="gallery__item-tags">
									<span>#sad</span>
									<span>#mouth</span>
									<span>#tear</span>
								</p>
								<a class="gallery__item-link">explore</a>
							</figcaption>
						</figure>
						<div class="gallery__text"><span class="gallery__text-inner" data-scroll data-scroll-speed="3">Deasil</span><span data-scroll data-scroll-speed="1" class="gallery__text-inner">Zetetic</span></div>
					</div>
				</div>
			</main>
		</div>
</template>
    
<script setup>
    import {clamp, map} from '../assets/utils/utils';
    import LocomotiveScroll from 'locomotive-scroll';
    import { ref, onMounted, nextTick } from 'vue';
    import { gsap } from 'gsap';


    

    

    onMounted(() => {
        const lscroll = new LocomotiveScroll({
            el: document.querySelector('[data-scroll-container]'),
            smooth: true,
            direction: 'horizontal'
        });
        // let's skew the images when scrolling. The faster we scroll the higher the skew value
        // skew interval from -15 to 15
        // "fast scrolling" means the distance from the previous scrolling position to the current one is high. We consider a interval of [-50,50] for the min/max distance
        let scroll = {cache: 0, current: 0};
        const allImgs = [...document.querySelectorAll('.gallery__item-img')];

        lscroll.on('scroll', (obj) => {
            console.log(obj)
            scroll.current = obj.scroll.x;
            const distance = scroll.current - scroll.cache;
            scroll.cache = scroll.current;
            const skewVal = map(distance, -50, 50, -15, 15);
            allImgs.forEach(el => el.style.transform = 'skewX('+clamp(skewVal, -15, 15)+'deg)');
        });
        lscroll.update();

    })


</script>
      
<style scoped lang="scss">
.rotate {
	transform: rotate(-4deg);
}

.gallery {
	display: flex;
	padding-right: 12vw;
	margin-left: 5vw;
    overflow-x: hidden;
}
.content {
	display: flex;
	flex-direction: column;
	height: calc(100vh - 13rem);
	position: relative;
	justify-content: flex-start;
}
.gallery__item {
	margin: 0 3vw;
	display: grid;
	grid-template-areas: '... ...' 
						 '... gallery-image'
						 '... ...' ;
	grid-template-columns: 8rem 21vmax;
	grid-template-rows: 8rem 28vmax 3rem;
}

.gallery__item-img {
	grid-area: gallery-image;
	width: 100%;
	height: 100%;
	overflow: hidden;
	position: relative;
	will-change: transform;
}

.gallery__item-imginner {
	background-size: cover;
    background-position: 50% 0;
	width: calc(100% + 10vw);
	margin-left: -5vw;
    height: 100%;
    will-change: transform;
}

.gallery__item-caption {
	grid-area: 1 / 1 / 4 / 3;
	display: grid;
	grid-template-areas: 'gallery-number gallery-title' 
						 'gallery-link ...'
						 'gallery-link gallery-tags' ;
	grid-template-columns: 8rem auto;
	grid-template-rows: 8rem auto 3rem;

}

.gallery__item-number {
	grid-area: gallery-number;
	font-size: 6rem;
	font-size: clamp(2.5rem,9vw,6.5rem);
	justify-self: end;
	padding-right: 2rem;
	color: var(--color-gallery-number);
}

.gallery__item-title {
	grid-area: gallery-title;
	margin: 0;
	font-size: 4rem;
	font-size: clamp(2rem,5vw,4rem);
	color: var(--color-gallery-title);
}

.gallery__item-number,
.gallery__item-title,
.gallery__text {
	font-family: moret, serif;
	font-weight: 800;
	font-style: italic;
	align-self: center;
}

.gallery__item-link {
	grid-area: gallery-link;
	align-self: end;
	font-size: 1.5rem;
	background: var(--color-gallery-link-bg);
	color: var(--color-gallery-link);
	text-decoration: underline;
	width: 120px;
	height: 120px;
	border-radius: 50%;
	position: relative;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
}

.gallery__item-link:focus,
.gallery__item-link:hover {
	background: var(--color-gallery-link-bg-hover);
	color: var(--color-gallery-link-hover);
	text-decoration: none;
}

.gallery__item-tags {
	grid-area: gallery-tags;
	justify-self: end;
	font-size: 1.5rem;
	display: grid;
	grid-auto-flow: column;
	grid-gap: 1rem;
	cursor: pointer;
}

.gallery__text {
	font-size: 20vw;
	line-height: 0.8;
	margin: 0 12vw;
	text-transform: lowercase;
	color: transparent;
	-webkit-text-stroke: 1px #645c5b;
	text-stroke: 1px #645c5b;
	-webkit-text-fill-color: transparent;
	text-fill-color: transparent;
}

.gallery__text-inner {
	display: block;
}

@media screen and (min-width: 53em) {
	.frame {
		grid-template-areas: 'title demos demos links';
	}
	.frame__info {
		justify-self: end;
	}
}
</style>

<style>
html.has-scroll-smooth {
	overflow: hidden; }
  
  html.has-scroll-dragging {
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none; }
  
  .has-scroll-smooth body {
	overflow: hidden; }
  
  .has-scroll-smooth [data-scroll-container] {
	min-height: 100vh; }
  
  [data-scroll-direction="horizontal"] [data-scroll-container] {
	white-space: nowrap;
	height: 100vh;
	display: inline-block;
	white-space: nowrap; }
  
  [data-scroll-direction="horizontal"] [data-scroll-section] {
	display: inline-block;
	vertical-align: top;
	white-space: nowrap;
	height: 100%; }
  
  .c-scrollbar {
	position: absolute;
	right: 0;
	top: 0;
	width: 11px;
	height: 100%;
	transform-origin: center right;
	transition: transform 0.3s, opacity 0.3s;
	opacity: 0; }
	.c-scrollbar:hover {
	  transform: scaleX(1.45); }
	.c-scrollbar:hover, .has-scroll-scrolling .c-scrollbar, .has-scroll-dragging .c-scrollbar {
	  opacity: 1; }
	[data-scroll-direction="horizontal"] .c-scrollbar {
	  width: 100%;
	  height: 10px;
	  top: auto;
	  bottom: 0;
	  transform: scaleY(1); }
	  [data-scroll-direction="horizontal"] .c-scrollbar:hover {
		transform: scaleY(1.3); }
  
  .c-scrollbar_thumb {
	position: absolute;
	top: 0;
	right: 0;
	background-color: black;
	opacity: 0.5;
	width: 7px;
	border-radius: 10px;
	margin: 2px;
	cursor: -webkit-grab;
	cursor: grab; }
	.has-scroll-dragging .c-scrollbar_thumb {
	  cursor: -webkit-grabbing;
	  cursor: grabbing; }
	[data-scroll-direction="horizontal"] .c-scrollbar_thumb {
	  right: auto;
	  bottom: 0; 
}
</style>